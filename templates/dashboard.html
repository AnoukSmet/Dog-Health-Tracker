{% extends 'base.html' %}

{% block content %}
<ul id="dropdown1" class="dropdown-content">
  <li><a href="#!">View profile</a></li>
  <li><a href="{{ url_for('log_out') }}">Log out</a></li>
</ul>
<nav class="navigation">
    <div> 
        <a href="#" class="brand-logo center" id="logo">Dog Health Tracker</a>
        <ul class="right">
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown1" id="username">{{user.username}}<i class="material-icons right">arrow_drop_down</i></a></li>
        </ul>
    
    </div>
</nav>
<div class="container">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <h4 class="center-align">{{ message }}</h4>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<div class="container">
    <div class="row">
        <div class="col s12">
        <ul class="tabs">
        {% for dog in dogs %}
            {% for dog_profile in dog_profiles %}
            <li class="tab col s3"><a href="#{{dog_profile.dog_id}}">{{dog_profile.dog_name}}</a></li>
            {% endfor %}
        </ul>
        </div>
        <div id="{{dog_id}}" class="col s12 dashboard">
                <div class="col m3" id="dog-profile">
                    <div id="add-dog">
                        <a href="{{ url_for('add_dog', user_id=user._id)}}"><i class="material-icons icons">add_circle</i></a>
                    </div>
                    <h2>{{ dog.dog_name }}</h2>
                    <h5><strong>Breed</strong></h5>
                    <span>{{ dog.dog_breed }}</span>
                    <h5><strong>Date of birth</strong></h5>
                    <span>{{ dog.date_of_birth }}</span>
                    <h5><strong>Description</strong></h5>
                    <span>{{ dog.dog_description }}</span>
                    <div class="profile-icons">
                        <a href="{{ url_for('edit_profile', dog_id = dog._id , user_id= user._id) }}"><i class="material-icons icons">edit</i></a>
                        <a href="{{ url_for('delete_profile', dog_id = dog._id, user_id= user._id) }}"><i class="material-icons icons">delete</i></a>
                    </div>
                </div>
            
                <div class="col m9">
                {% for log in logs %}
                        {% if dog_id == dog.dog_id %}
                    <div class="row log">
                        <div class="col m3 log-date">
                            <span id="log-day">{{ log.log_date[0:2] }}</span>
                            <span id="log-month-year"> {{log.log_date[3:]}}</span>
                        </div>
                        <div class="col m9 ">
                            <p class="log-element">Activity: {{ log.dog_activity }}</p>
                            <p class="log-element">Food: {{ log.dog_food }} {{log.food_metric}}</p>
                            <p class="log-element">Weight: {{ log.dog_weight }} {{log.weight_metric}}</p>
                            <p class="log-element">Other notes: {{ log.other_notes }}</p>
                        </div>
                        <div class="log-icons">
                            <a href="{{ url_for('edit_log', log_id = log._id , user_id= user._id) }}"><i class="material-icons icons">edit</i></a>
                            <a href="{{ url_for('delete_log', log_id = log._id , user_id= user._id) }}"><i class="material-icons icons">delete</i></a>
                        </div>

                    </div>
                    {% endif %}
            {% endfor %}
                </div>
            
                <div class="fixed-action-btn">
                    <a class="btn-floating btn-large"  href="{{ url_for('add_log',  dog_id=dog._id, user_id=user._id) }}">
                        <i class="material-icons bg-color">add</i>
                    </a>
                </div>
        
        </div>
    </div>
</div>
{% endfor %} 
{% endblock %}