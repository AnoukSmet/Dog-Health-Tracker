{% extends 'layout/base.html' %}

{% include 'components/navigation/extensive_navigation.html' %}

{% block content %}
<div>
{% include 'components/flash_messages.html' %}
</div>
<div class="container">
    <div class="row">
        <div class="col s12" id="dog-selection">
            {% if count_dogs > 1 %}
            <form action="{{ url_for('view_dashboard', dog_id = dog_id, user_id=user_id)}}" id="dog-profile-selection" method="POST" class="row">
                <div class="col s12">
                    <select id="dog-dropdown" name="dog_name" onchange="submitForm();">
                        <option value="default" selected disabled>Select the dog profile you want to see</option>
                    {% for dog in dogs %}
                        <option id="dog_name" value="{{dog.dog_name}}">{{dog.dog_name}}</option>
                    {% endfor %}
                    </select>
                </div>
            </form>
            {% endif %}
        </div>
        <div id="{{dog_id}}" class="col s12 dashboard">
            <div class="col s12 m3" id="dog-profile">
                <div class="row">
                    <div class="col s12">
                        <div id="add-dog">
                            <a href="{{ url_for('add_dog', user_id=user_id)}}" title="Add another dog"><i class="material-icons icons">add_circle</i></a>
                        </div>
                    </div>
                    {% if dog.dog_image ==  "" %}
                    <div class="col s12" id="image-container">
                        <div id="no-image">
                            <a href="{{ url_for('edit_dog', dog_id=dog_id , user_id=user_id) }}" title="Add profile image of your dog"> Click here to add a profile image of your dog!</a>
                        </div>
                    </div>
                    <!-- <img src="../static/images/default-dog-image.jpg" id="default-profile-image" alt="default_profile_image_dog"> -->
                    {% else %}
                    <div class="col s12">
                        <img src="{{ dog.dog_image }}" id="profile-image" alt="profile_image_dog">
                    </div>
                    {% endif %}
                    <div class="col s12">
                        <h2 id="dog-heading">{{ dog.dog_name }}</h2>
                        <h5 class="dog-subheading"><strong>Breed</strong></h5>
                        <span class="dog-body">{{ dog.dog_breed }}</span>
                        <h5 class="dog-subheading"><strong>Date of birth</strong></h5>
                        <span class="dog-body">{{ dog.date_of_birth }}</span>
                        <h5 class="dog-subheading"><strong>Description</strong></h5>
                        <span class="dog-body">{{ dog.dog_description }}</span>
                        <div class="profile-icons">
                            <a href="{{ url_for('edit_dog', dog_id = dog_id , user_id=user_id) }}" title="Edit dog profile"><i class="material-icons icons">edit</i></a>
                            <a href="{{ url_for('delete_dog', dog_id = dog_id, user_id=user_id) }}" title="Delete dog profile"><i class="material-icons icons">delete</i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col m9">
                
            {% if count_logs == 0 %}
                <div id="default-log">Click <a href="{{ url_for('add_log', user_id=user_id, dog_id=dog_id)}}">here</a> or on the plus sign right below to add your first log! </div>
            {% else %}
                <div id="search-button"><a href="{{url_for('search_logs', dog_id=dog_id, user_id=user_id) }}" class="form-buttons">Click here to search logs by date</a></div>
                {% for log in logs %}
                <div class="log-container">
                <div class="row log">
                    <div class="col s12 m3 log-date">
                        <span id="log-day">{{ log.log_date[-2:] }}</span>
                        <span id="log-month"> {{log.log_date[4:-2]}}</span>
                        <span id="log-year"> {{ log.log_date[0:4]}}</span>
                    </div>
                    <div class="col s12 m7">
                        <p class="log-element">Activity: {{ log.dog_activity }}</p>
                        <p class="log-element">Food: {{ log.dog_food }} {{log.food_metric}}</p>
                        <p class="log-element">Weight: {{ log.dog_weight }} {{log.weight_metric}}</p>
                        <p class="log-element">Other notes: {{ log.other_notes }}</p>
                    </div>
                    <div class="log-icons s12 m2">
                        <a href="{{ url_for('edit_log', log_id = log._id , user_id=user_id, dog_id=dog_id) }}" title="Edit log"><i class="material-icons icons">edit</i></a>
                        <a href="{{ url_for('delete_log', log_id = log._id , user_id=user_id, dog_id=dog_id) }}" title="Delete log"><i class="material-icons icons">delete</i></a>
                    </div>

                </div>
                </div>
        {% endfor %}
        {% endif %}

                <div class="fixed-action-btn"> 
                    <a class="btn-floating btn-large" href="{{ url_for('add_log',  dog_id=dog_id, user_id=user_id) }}" title="Add another log">
                        <i class="material-icons bg-color">add</i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% include 'components/footer/footer.html' %}
{% endblock %}